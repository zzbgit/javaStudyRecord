#JVM

##类加载

**类的生命周期**

**加载** **->** **验证** **->** **准备** **->** **解析** **->** **初始化** **->** **使用** **->** **卸载**

注意：以上是阶段开始时间的先后顺序，这些阶段通常都是交叉混合进行的。加载、验证、准备、初始化和卸载的顺序是确定的，解析可以在初始化之后再开始。

####1. 加载

（1）通过一个类的全限定名来获取定义此类的二进制字节流

JAVA虚拟机规范没有指明从哪获取，如何获取二进制字节流。可以从JAR、WAR包中获取，也可以运行时计算生成（动态代理技术，为特定接口生成代理类的二进制字节流）。

（2）将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构

（3）在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口。

总结：获取类的二进制字节流，生成代表这个类的Class对象

####2. 验证

校验加载进来的Class文件的字节流是否符合JAVA虚拟机规范（文件格式验证（校验是否以魔数0xCAFEBABE开头等）、元数据验证（校验字节码描述信息）、字节码验证和符号引用验证）

####3. 准备

为类中定义的静态变量分配内存并设初值。JDK7及以前，类变量存在永久代；JDK8及以后，类变量存放在堆中。

####4. 解析